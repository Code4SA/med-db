{% macro render_field(field) %}
  <div class="form-group{% if field.errors %} has-error{% endif %}">
    <label class="col-md-4 control-label">{{ field.label }}</label>
    <div class="col-md-4">
      {% if field.errors %}
        {% set css_class = 'has-error ' + kwargs.pop('class', '') %}
        {{ field(class=css_class, **kwargs) }}
        <ul class="list-unstyled help-block">{% for error in field.errors %}<li>{{ error|e }}</li>{% endfor %}</ul>
      {% else %}
        {{ field(**kwargs) }}
      {% endif %}
    </div>
  </div>
{% endmacro %}